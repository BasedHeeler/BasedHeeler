"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[37],{8037:(e,n,t)=>{t.r(n),t.d(n,{W3mModal:()=>u});var i,o=t(7528),s=t(5029),a=t(3286),r=t(6898),d=t(7866);const l=(0,r.AH)(i||(i=(0,o.A)(["\n  :host {\n    z-index: var(--w3m-z-index);\n    display: block;\n    backface-visibility: hidden;\n    will-change: opacity;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    pointer-events: none;\n    opacity: 0;\n    background-color: var(--wui-cover);\n    transition: opacity 0.2s var(--wui-ease-out-power-2);\n    will-change: opacity;\n  }\n\n  :host(.open) {\n    opacity: 1;\n  }\n\n  wui-card {\n    max-width: var(--w3m-modal-width);\n    width: 100%;\n    position: relative;\n    animation: zoom-in 0.2s var(--wui-ease-out-power-2);\n    animation-fill-mode: backwards;\n    outline: none;\n  }\n\n  wui-card[shake='true'] {\n    animation:\n      zoom-in 0.2s var(--wui-ease-out-power-2),\n      w3m-shake 0.5s var(--wui-ease-out-power-2);\n  }\n\n  wui-flex {\n    overflow-x: hidden;\n    overflow-y: auto;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n  }\n\n  @media (max-height: 700px) and (min-width: 431px) {\n    wui-flex {\n      align-items: flex-start;\n    }\n\n    wui-card {\n      margin: var(--wui-spacing-xxl) 0px;\n    }\n  }\n\n  @media (max-width: 430px) {\n    wui-flex {\n      align-items: flex-end;\n    }\n\n    wui-card {\n      max-width: 100%;\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n      border-bottom: none;\n      animation: slide-in 0.2s var(--wui-ease-out-power-2);\n    }\n\n    wui-card[shake='true'] {\n      animation:\n        slide-in 0.2s var(--wui-ease-out-power-2),\n        w3m-shake 0.5s var(--wui-ease-out-power-2);\n    }\n  }\n\n  @keyframes zoom-in {\n    0% {\n      transform: scale(0.95) translateY(0);\n    }\n    100% {\n      transform: scale(1) translateY(0);\n    }\n  }\n\n  @keyframes slide-in {\n    0% {\n      transform: scale(1) translateY(50px);\n    }\n    100% {\n      transform: scale(1) translateY(0);\n    }\n  }\n\n  @keyframes w3m-shake {\n    0% {\n      transform: scale(1) rotate(0deg);\n    }\n    20% {\n      transform: scale(1) rotate(-1deg);\n    }\n    40% {\n      transform: scale(1) rotate(1.5deg);\n    }\n    60% {\n      transform: scale(1) rotate(-1.5deg);\n    }\n    80% {\n      transform: scale(1) rotate(1deg);\n    }\n    100% {\n      transform: scale(1) rotate(0deg);\n    }\n  }\n\n  @keyframes w3m-view-height {\n    from {\n      height: var(--prev-height);\n    }\n    to {\n      height: var(--new-height);\n    }\n  }\n"])));var c,h=function(e,n,t,i){var o,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,n,t,i);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(n,t,a):o(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a};const w="scroll-lock";let u=class extends r.WF{constructor(){super(),this.unsubscribe=[],this.abortController=void 0,this.open=s.W3.state.open,this.caipAddress=s.Uj.state.caipAddress,this.isSiweEnabled=s.Hd.state.isSiweEnabled,this.connected=s.Uj.state.isConnected,this.loading=s.W3.state.loading,this.shake=s.W3.state.shake,this.initializeTheming(),s.Np.prefetch(),this.unsubscribe.push(s.W3.subscribeKey("open",(e=>e?this.onOpen():this.onClose())),s.W3.subscribeKey("shake",(e=>this.shake=e)),s.W3.subscribeKey("loading",(e=>{this.loading=e,this.onNewAddress(s.Uj.state.caipAddress)})),s.Uj.subscribeKey("isConnected",(e=>this.connected=e)),s.Uj.subscribeKey("caipAddress",(e=>this.onNewAddress(e))),s.Hd.subscribeKey("isSiweEnabled",(e=>this.isSiweEnabled=e))),s.En.sendEvent({type:"track",event:"MODAL_LOADED"})}disconnectedCallback(){this.unsubscribe.forEach((e=>e())),this.onRemoveKeyboardListener()}render(){return this.open?(0,r.qy)(c||(c=(0,o.A)(["\n          <wui-flex @click=",'>\n            <wui-card shake="','" role="alertdialog" aria-modal="true" tabindex="0">\n              <w3m-header></w3m-header>\n              <w3m-router></w3m-router>\n              <w3m-snackbar></w3m-snackbar>\n            </wui-card>\n          </wui-flex>\n          <w3m-tooltip></w3m-tooltip>\n        '])),this.onOverlayClick.bind(this),this.shake):null}async onOverlayClick(e){e.target===e.currentTarget&&await this.handleClose()}async handleClose(){const e="ConnectingSiwe"===s.IN.state.view,n="ApproveTransaction"===s.IN.state.view;if(this.isSiweEnabled){const{SIWEController:i}=await t.e(378).then(t.bind(t,9378));"success"!==i.state.status&&(e||n)?s.W3.shake():s.W3.close()}else s.W3.close()}initializeTheming(){const{themeVariables:e,themeMode:n}=s.Wn.state,t=a.UiHelperUtil.getColorTheme(n);(0,a.initializeTheming)(e,t)}onClose(){this.open=!1,this.classList.remove("open"),this.onScrollUnlock(),s.Pt.hide(),this.onRemoveKeyboardListener()}onOpen(){this.open=!0,this.classList.add("open"),this.onScrollLock(),this.onAddKeyboardListener()}onScrollLock(){const e=document.createElement("style");e.dataset.w3m=w,e.textContent="\n      body {\n        touch-action: none;\n        overflow: hidden;\n        overscroll-behavior: contain;\n      }\n      w3m-modal {\n        pointer-events: auto;\n      }\n    ",document.head.appendChild(e)}onScrollUnlock(){const e=document.head.querySelector('style[data-w3m="'.concat(w,'"]'));e&&e.remove()}onAddKeyboardListener(){var e;this.abortController=new AbortController;const n=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("wui-card");null===n||void 0===n||n.focus(),window.addEventListener("keydown",(e=>{if("Escape"===e.key)this.handleClose();else if("Tab"===e.key){const{tagName:t}=e.target;!t||t.includes("W3M-")||t.includes("WUI-")||null===n||void 0===n||n.focus()}}),this.abortController)}onRemoveKeyboardListener(){var e;null===(e=this.abortController)||void 0===e||e.abort(),this.abortController=void 0}async onNewAddress(e){if(!this.connected||this.loading)return;const n=s.wE.getPlainAddress(this.caipAddress),i=s.wE.getPlainAddress(e),o=s.wE.getNetworkId(this.caipAddress),a=s.wE.getNetworkId(e);if(this.caipAddress=e,this.isSiweEnabled){const{SIWEController:e}=await t.e(378).then(t.bind(t,9378)),s=await e.getSession();var r,d;if(s&&n&&i&&n!==i)return void(null!==(r=e.state._client)&&void 0!==r&&r.options.signOutOnAccountChange&&(await e.signOut(),this.onSiweNavigation()));if(s&&o&&a&&o!==a)return void(null!==(d=e.state._client)&&void 0!==d&&d.options.signOutOnNetworkChange&&(await e.signOut(),this.onSiweNavigation()));this.onSiweNavigation()}}onSiweNavigation(){this.open?s.IN.push("ConnectingSiwe"):s.W3.open({view:"ConnectingSiwe"})}};u.styles=l,h([(0,d.wk)()],u.prototype,"open",void 0),h([(0,d.wk)()],u.prototype,"caipAddress",void 0),h([(0,d.wk)()],u.prototype,"isSiweEnabled",void 0),h([(0,d.wk)()],u.prototype,"connected",void 0),h([(0,d.wk)()],u.prototype,"loading",void 0),h([(0,d.wk)()],u.prototype,"shake",void 0),u=h([(0,a.customElement)("w3m-modal")],u)}}]);
//# sourceMappingURL=37.fd32e89a.chunk.js.map